import{randomUUID as e}from"crypto";import t from"path";function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r,a;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(r||(r={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(a||(a={}));const i=r.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),s=e=>{switch(typeof e){case"undefined":return i.undefined;case"string":return i.string;case"number":return isNaN(e)?i.nan:i.number;case"boolean":return i.boolean;case"function":return i.function;case"bigint":return i.bigint;case"symbol":return i.symbol;case"object":return Array.isArray(e)?i.array:null===e?i.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?i.promise:"undefined"!=typeof Map&&e instanceof Map?i.map:"undefined"!=typeof Set&&e instanceof Set?i.set:"undefined"!=typeof Date&&e instanceof Date?i.date:i.object;default:return i.unknown}},o=r.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);let c=class e extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){const n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,r.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};c.create=e=>new c(e);const u=(e,t)=>{let n;switch(e.code){case o.invalid_type:n=e.received===i.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case o.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,r.jsonStringifyReplacer)}`;break;case o.unrecognized_keys:n=`Unrecognized key(s) in object: ${r.joinValues(e.keys,", ")}`;break;case o.invalid_union:n="Invalid input";break;case o.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${r.joinValues(e.options)}`;break;case o.invalid_enum_value:n=`Invalid enum value. Expected ${r.joinValues(e.options)}, received '${e.received}'`;break;case o.invalid_arguments:n="Invalid function arguments";break;case o.invalid_return_type:n="Invalid function return type";break;case o.invalid_date:n="Invalid date";break;case o.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:r.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case o.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case o.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case o.custom:n="Invalid input";break;case o.invalid_intersection_types:n="Intersection results could not be merged";break;case o.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case o.not_finite:n="Number must be finite";break;default:n=t.defaultError,r.assertNever(e)}return{message:n}};let d=u;function l(){return d}const p=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i};if(void 0!==a.message)return{...a,path:i,message:a.message};let o="";const c=r.filter(e=>!!e).slice().reverse();for(const e of c)o=e(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}};function h(e,t){const n=l(),r=p({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===u?void 0:u].filter(e=>!!e)});e.common.issues.push(r)}class f{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return m;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,r=await e.value;n.push({key:t,value:r})}return f.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:a}=r;if("aborted"===t.status)return m;if("aborted"===a.status)return m;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!r.alwaysSet||(n[t.value]=a.value)}return{status:e.value,value:n}}}const m=Object.freeze({status:"aborted"}),v=e=>({status:"dirty",value:e}),y=e=>({status:"valid",value:e}),_=e=>"aborted"===e.status,g=e=>"dirty"===e.status,b=e=>"valid"===e.status,w=e=>"undefined"!=typeof Promise&&e instanceof Promise;function k(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function x(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n}var z,Z,T;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(z||(z={}));class E{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const O=(e,t)=>{if(b(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new c(e.common.issues);return this._error=t,this._error}}};function j(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{var i,s;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:a.defaultError}:void 0===a.data?{message:null!==(i=null!=o?o:r)&&void 0!==i?i:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(s=null!=o?o:n)&&void 0!==s?s:a.defaultError}},description:a}}let N=class{get description(){return this._def.description}_getType(e){return s(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:s(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new f,ctx:{common:e.parent.common,data:e.data,parsedType:s(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(w(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:s(e)},a=this._parseSync({data:e,path:r.path,parent:r});return O(r,a)}"~validate"(e){var t,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:s(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:r});return b(t)?{value:t.value}:{issues:r.common.issues}}catch(e){(null===(n=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===n?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(e=>b(e)?{value:e.value}:{issues:r.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:s(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(w(r)?r:Promise.resolve(r));return O(n,a)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{const a=e(t),i=()=>r.addIssue({code:o.custom,...n(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(i(),!1)):!!a||(i(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new Ae({schema:this,typeName:Be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Ie.create(this,this._def)}nullable(){return Pe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return he.create(this)}promise(){return $e.create(this,this._def)}or(e){return ve.create([this,e],this._def)}and(e){return be.create(this,e,this._def)}transform(e){return new Ae({...j(this._def),schema:this,typeName:Be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Se({...j(this._def),innerType:this,defaultValue:t,typeName:Be.ZodDefault})}brand(){return new Me({typeName:Be.ZodBranded,type:this,...j(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Ce({...j(this._def),innerType:this,catchValue:t,typeName:Be.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return De.create(this,e)}readonly(){return Le.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const $=/^c[^\s-]{8,}$/i,A=/^[0-9a-z]+$/,I=/^[0-9A-HJKMNP-TV-Z]{26}$/i,P=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,S=/^[a-z0-9_-]{21}$/i,C=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,R=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,F=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let M;const D=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,L=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,U=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,V=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,B=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,W=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,q="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",K=new RegExp(`^${q}$`);function G(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function J(e){return new RegExp(`^${G(e)}$`)}function Y(e){let t=`${q}T${G(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function H(e,t){return!("v4"!==t&&t||!D.test(e))||!("v6"!==t&&t||!U.test(e))}function X(e,t){if(!C.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return"object"==typeof a&&null!==a&&(!(!a.typ||!a.alg)&&(!t||a.alg===t))}catch(e){return!1}}function Q(e,t){return!("v4"!==t&&t||!L.test(e))||!("v6"!==t&&t||!V.test(e))}let ee=class e extends N{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==i.string){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.string,received:t.parsedType}),m}const t=new f;let n;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:o.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:o.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const r=e.data.length>a.value,i=e.data.length<a.value;(r||i)&&(n=this._getOrReturnCtx(e,n),r?h(n,{code:o.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):i&&h(n,{code:o.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)F.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"email",code:o.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)M||(M=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),M.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"emoji",code:o.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)P.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"uuid",code:o.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)S.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"nanoid",code:o.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)$.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"cuid",code:o.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)A.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"cuid2",code:o.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)I.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"ulid",code:o.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),h(n,{validation:"url",code:o.invalid_string,message:a.message}),t.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"regex",code:o.invalid_string,message:a.message}),t.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),h(n,{code:o.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),h(n,{code:o.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),h(n,{code:o.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if("datetime"===a.kind){Y(a).test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:o.invalid_string,validation:"datetime",message:a.message}),t.dirty())}else if("date"===a.kind){K.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:o.invalid_string,validation:"date",message:a.message}),t.dirty())}else if("time"===a.kind){J(a).test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:o.invalid_string,validation:"time",message:a.message}),t.dirty())}else"duration"===a.kind?R.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"duration",code:o.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?H(e.data,a.version)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"ip",code:o.invalid_string,message:a.message}),t.dirty()):"jwt"===a.kind?X(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"jwt",code:o.invalid_string,message:a.message}),t.dirty()):"cidr"===a.kind?Q(e.data,a.version)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"cidr",code:o.invalid_string,message:a.message}),t.dirty()):"base64"===a.kind?B.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"base64",code:o.invalid_string,message:a.message}),t.dirty()):"base64url"===a.kind?W.test(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{validation:"base64url",code:o.invalid_string,message:a.message}),t.dirty()):r.assertNever(a);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:o.invalid_string,...z.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(e){return this._addCheck({kind:"email",...z.errToObj(e)})}url(e){return this._addCheck({kind:"url",...z.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...z.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...z.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...z.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...z.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...z.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...z.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...z.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...z.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...z.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...z.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...z.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...z.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...z.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...z.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...z.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...z.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...z.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...z.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...z.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...z.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...z.errToObj(t)})}nonempty(e){return this.min(1,z.errToObj(e))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function te(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}ee.create=e=>{var t;return new ee({checks:[],typeName:Be.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...j(e)})};let ne=class e extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==i.number){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.number,received:t.parsedType}),m}let t;const n=new f;for(const a of this._def.checks)if("int"===a.kind)r.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),h(t,{code:o.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty());else if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:o.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:o.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else"multipleOf"===a.kind?0!==te(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:o.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),h(t,{code:o.not_finite,message:a.message}),n.dirty()):r.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,z.toString(t))}gt(e,t){return this.setLimit("min",e,!1,z.toString(t))}lte(e,t){return this.setLimit("max",e,!0,z.toString(t))}lt(e,t){return this.setLimit("max",e,!1,z.toString(t))}setLimit(t,n,r,a){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:z.toString(a)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(e){return this._addCheck({kind:"int",message:z.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:z.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:z.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:z.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:z.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:z.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&r.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};ne.create=e=>new ne({checks:[],typeName:Be.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...j(e)});class re extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==i.bigint)return this._getInvalidInput(e);let t;const n=new f;for(const a of this._def.checks)if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:o.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:o.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),h(t,{code:o.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):r.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.bigint,received:t.parsedType}),m}gte(e,t){return this.setLimit("min",e,!0,z.toString(t))}gt(e,t){return this.setLimit("min",e,!1,z.toString(t))}lte(e,t){return this.setLimit("max",e,!0,z.toString(t))}lt(e,t){return this.setLimit("max",e,!1,z.toString(t))}setLimit(e,t,n,r){return new re({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:z.toString(r)}]})}_addCheck(e){return new re({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:z.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:z.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}re.create=e=>{var t;return new re({checks:[],typeName:Be.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...j(e)})};class ae extends N{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==i.boolean){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.boolean,received:t.parsedType}),m}return y(e.data)}}ae.create=e=>new ae({typeName:Be.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...j(e)});class ie extends N{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==i.date){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.date,received:t.parsedType}),m}if(isNaN(e.data.getTime())){return h(this._getOrReturnCtx(e),{code:o.invalid_date}),m}const t=new f;let n;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:o.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),h(n,{code:o.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):r.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ie({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:z.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:z.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ie.create=e=>new ie({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Be.ZodDate,...j(e)});class se extends N{_parse(e){if(this._getType(e)!==i.symbol){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.symbol,received:t.parsedType}),m}return y(e.data)}}se.create=e=>new se({typeName:Be.ZodSymbol,...j(e)});class oe extends N{_parse(e){if(this._getType(e)!==i.undefined){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.undefined,received:t.parsedType}),m}return y(e.data)}}oe.create=e=>new oe({typeName:Be.ZodUndefined,...j(e)});class ce extends N{_parse(e){if(this._getType(e)!==i.null){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.null,received:t.parsedType}),m}return y(e.data)}}ce.create=e=>new ce({typeName:Be.ZodNull,...j(e)});class ue extends N{constructor(){super(...arguments),this._any=!0}_parse(e){return y(e.data)}}ue.create=e=>new ue({typeName:Be.ZodAny,...j(e)});let de=class extends N{constructor(){super(...arguments),this._unknown=!0}_parse(e){return y(e.data)}};de.create=e=>new de({typeName:Be.ZodUnknown,...j(e)});let le=class extends N{_parse(e){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.never,received:t.parsedType}),m}};le.create=e=>new le({typeName:Be.ZodNever,...j(e)});class pe extends N{_parse(e){if(this._getType(e)!==i.undefined){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.void,received:t.parsedType}),m}return y(e.data)}}pe.create=e=>new pe({typeName:Be.ZodVoid,...j(e)});let he=class e extends N{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==i.array)return h(t,{code:o.invalid_type,expected:i.array,received:t.parsedType}),m;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(h(t,{code:e?o.too_big:o.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(h(t,{code:o.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(h(t,{code:o.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new E(t,e,t.path,n)))).then(e=>f.mergeArray(n,e));const a=[...t.data].map((e,n)=>r.type._parseSync(new E(t,e,t.path,n)));return f.mergeArray(n,a)}get element(){return this._def.type}min(t,n){return new e({...this._def,minLength:{value:t,message:z.toString(n)}})}max(t,n){return new e({...this._def,maxLength:{value:t,message:z.toString(n)}})}length(t,n){return new e({...this._def,exactLength:{value:t,message:z.toString(n)}})}nonempty(e){return this.min(1,e)}};function fe(e){if(e instanceof me){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ie.create(fe(r))}return new me({...e._def,shape:()=>t})}return e instanceof he?new he({...e._def,type:fe(e.element)}):e instanceof Ie?Ie.create(fe(e.unwrap())):e instanceof Pe?Pe.create(fe(e.unwrap())):e instanceof we?we.create(e.items.map(e=>fe(e))):e}he.create=(e,t)=>new he({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Be.ZodArray,...j(t)});let me=class e extends N{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=r.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==i.object){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.object,received:t.parsedType}),m}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof le&&"strip"===this._def.unknownKeys))for(const e in n.data)a.includes(e)||s.push(e);const c=[];for(const e of a){const t=r[e],a=n.data[e];c.push({key:{status:"valid",value:e},value:t._parse(new E(n,a,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof le){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)c.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)s.length>0&&(h(n,{code:o.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const r=n.data[t];c.push({key:{status:"valid",value:t},value:e._parse(new E(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of c){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>f.mergeObjectSync(t,e)):f.mergeObjectSync(t,c)}get shape(){return this._def.shape()}strict(t){return z.errToObj,new e({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,n)=>{var r,a,i,s;const o=null!==(i=null===(a=(r=this._def).errorMap)||void 0===a?void 0:a.call(r,e,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===e.code?{message:null!==(s=z.errToObj(t).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Be.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(t){return new e({...this._def,catchall:t})}pick(t){const n={};return r.objectKeys(t).forEach(e=>{t[e]&&this.shape[e]&&(n[e]=this.shape[e])}),new e({...this._def,shape:()=>n})}omit(t){const n={};return r.objectKeys(this.shape).forEach(e=>{t[e]||(n[e]=this.shape[e])}),new e({...this._def,shape:()=>n})}deepPartial(){return fe(this)}partial(t){const n={};return r.objectKeys(this.shape).forEach(e=>{const r=this.shape[e];t&&!t[e]?n[e]=r:n[e]=r.optional()}),new e({...this._def,shape:()=>n})}required(t){const n={};return r.objectKeys(this.shape).forEach(e=>{if(t&&!t[e])n[e]=this.shape[e];else{let t=this.shape[e];for(;t instanceof Ie;)t=t._def.innerType;n[e]=t}}),new e({...this._def,shape:()=>n})}keyof(){return Oe(r.objectKeys(this.shape))}};me.create=(e,t)=>new me({shape:()=>e,unknownKeys:"strip",catchall:le.create(),typeName:Be.ZodObject,...j(t)}),me.strictCreate=(e,t)=>new me({shape:()=>e,unknownKeys:"strict",catchall:le.create(),typeName:Be.ZodObject,...j(t)}),me.lazycreate=(e,t)=>new me({shape:e,unknownKeys:"strip",catchall:le.create(),typeName:Be.ZodObject,...j(t)});let ve=class extends N{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map(e=>new c(e.ctx.common.issues));return h(t,{code:o.invalid_union,unionErrors:n}),m});{let e;const r=[];for(const a of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=r.map(e=>new c(e));return h(t,{code:o.invalid_union,unionErrors:a}),m}}get options(){return this._def.options}};ve.create=(e,t)=>new ve({options:e,typeName:Be.ZodUnion,...j(t)});const ye=e=>e instanceof Te?ye(e.schema):e instanceof Ae?ye(e.innerType()):e instanceof Ee?[e.value]:e instanceof je?e.options:e instanceof Ne?r.objectValues(e.enum):e instanceof Se?ye(e._def.innerType):e instanceof oe?[void 0]:e instanceof ce?[null]:e instanceof Ie?[void 0,...ye(e.unwrap())]:e instanceof Pe?[null,...ye(e.unwrap())]:e instanceof Me||e instanceof Le?ye(e.unwrap()):e instanceof Ce?ye(e._def.innerType):[];class _e extends N{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.object)return h(t,{code:o.invalid_type,expected:i.object,received:t.parsedType}),m;const n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(h(t,{code:o.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),m)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=ye(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of t){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,n)}}return new _e({typeName:Be.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...j(n)})}}function ge(e,t){const n=s(e),a=s(t);if(e===t)return{valid:!0,data:e};if(n===i.object&&a===i.object){const n=r.objectKeys(t),a=r.objectKeys(e).filter(e=>-1!==n.indexOf(e)),i={...e,...t};for(const n of a){const r=ge(e[n],t[n]);if(!r.valid)return{valid:!1};i[n]=r.data}return{valid:!0,data:i}}if(n===i.array&&a===i.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const a=ge(e[r],t[r]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===i.date&&a===i.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}let be=class extends N{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(_(e)||_(r))return m;const a=ge(e.value,r.value);return a.valid?((g(e)||g(r))&&t.dirty(),{status:t.value,value:a.data}):(h(n,{code:o.invalid_intersection_types}),m)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};be.create=(e,t,n)=>new be({left:e,right:t,typeName:Be.ZodIntersection,...j(n)});class we extends N{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==i.array)return h(n,{code:o.invalid_type,expected:i.array,received:n.parsedType}),m;if(n.data.length<this._def.items.length)return h(n,{code:o.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),m;!this._def.rest&&n.data.length>this._def.items.length&&(h(n,{code:o.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new E(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>f.mergeArray(t,e)):f.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new we({...this._def,rest:e})}}we.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new we({items:e,typeName:Be.ZodTuple,rest:null,...j(t)})};class ke extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==i.object)return h(n,{code:o.invalid_type,expected:i.object,received:n.parsedType}),m;const r=[],a=this._def.keyType,s=this._def.valueType;for(const e in n.data)r.push({key:a._parse(new E(n,e,n.path,e)),value:s._parse(new E(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?f.mergeObjectAsync(t,r):f.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new ke(t instanceof N?{keyType:e,valueType:t,typeName:Be.ZodRecord,...j(n)}:{keyType:ee.create(),valueType:e,typeName:Be.ZodRecord,...j(t)})}}class xe extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==i.map)return h(n,{code:o.invalid_type,expected:i.map,received:n.parsedType}),m;const r=this._def.keyType,a=this._def.valueType,s=[...n.data.entries()].map(([e,t],i)=>({key:r._parse(new E(n,e,n.path,[i,"key"])),value:a._parse(new E(n,t,n.path,[i,"value"]))}));if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of s){const r=await n.key,a=await n.value;if("aborted"===r.status||"aborted"===a.status)return m;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of s){const r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return m;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}}xe.create=(e,t,n)=>new xe({valueType:t,keyType:e,typeName:Be.ZodMap,...j(n)});class ze extends N{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==i.set)return h(n,{code:o.invalid_type,expected:i.set,received:n.parsedType}),m;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(h(n,{code:o.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(h(n,{code:o.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function s(e){const n=new Set;for(const r of e){if("aborted"===r.status)return m;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const c=[...n.data.values()].map((e,t)=>a._parse(new E(n,e,n.path,t)));return n.common.async?Promise.all(c).then(e=>s(e)):s(c)}min(e,t){return new ze({...this._def,minSize:{value:e,message:z.toString(t)}})}max(e,t){return new ze({...this._def,maxSize:{value:e,message:z.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ze.create=(e,t)=>new ze({valueType:e,minSize:null,maxSize:null,typeName:Be.ZodSet,...j(t)});class Ze extends N{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.function)return h(t,{code:o.invalid_type,expected:i.function,received:t.parsedType}),m;function n(e,n){return p({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,l(),u].filter(e=>!!e),issueData:{code:o.invalid_arguments,argumentsError:n}})}function r(e,n){return p({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,l(),u].filter(e=>!!e),issueData:{code:o.invalid_return_type,returnTypeError:n}})}const a={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof $e){const e=this;return y(async function(...t){const i=new c([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw i.addIssue(n(t,e)),i}),u=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(u,a).catch(e=>{throw i.addIssue(r(u,e)),i})})}{const e=this;return y(function(...t){const i=e._def.args.safeParse(t,a);if(!i.success)throw new c([n(t,i.error)]);const o=Reflect.apply(s,this,i.data),u=e._def.returns.safeParse(o,a);if(!u.success)throw new c([r(o,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ze({...this._def,args:we.create(e).rest(de.create())})}returns(e){return new Ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Ze({args:e||we.create([]).rest(de.create()),returns:t||de.create(),typeName:Be.ZodFunction,...j(n)})}}class Te extends N{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Te.create=(e,t)=>new Te({getter:e,typeName:Be.ZodLazy,...j(t)});class Ee extends N{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return h(t,{received:t.data,code:o.invalid_literal,expected:this._def.value}),m}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Oe(e,t){return new je({values:e,typeName:Be.ZodEnum,...j(t)})}Ee.create=(e,t)=>new Ee({value:e,typeName:Be.ZodLiteral,...j(t)});let je=class e extends N{constructor(){super(...arguments),Z.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return h(t,{expected:r.joinValues(n),received:t.parsedType,code:o.invalid_type}),m}if(k(this,Z,"f")||x(this,Z,new Set(this._def.values),"f"),!k(this,Z,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return h(t,{received:t.data,code:o.invalid_enum_value,options:n}),m}return y(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(t,n=this._def){return e.create(t,{...this._def,...n})}exclude(t,n=this._def){return e.create(this.options.filter(e=>!t.includes(e)),{...this._def,...n})}};Z=new WeakMap,je.create=Oe;class Ne extends N{constructor(){super(...arguments),T.set(this,void 0)}_parse(e){const t=r.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==i.string&&n.parsedType!==i.number){const e=r.objectValues(t);return h(n,{expected:r.joinValues(e),received:n.parsedType,code:o.invalid_type}),m}if(k(this,T,"f")||x(this,T,new Set(r.getValidEnumValues(this._def.values)),"f"),!k(this,T,"f").has(e.data)){const e=r.objectValues(t);return h(n,{received:n.data,code:o.invalid_enum_value,options:e}),m}return y(e.data)}get enum(){return this._def.values}}T=new WeakMap,Ne.create=(e,t)=>new Ne({values:e,typeName:Be.ZodNativeEnum,...j(t)});class $e extends N{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.promise&&!1===t.common.async)return h(t,{code:o.invalid_type,expected:i.promise,received:t.parsedType}),m;const n=t.parsedType===i.promise?t.data:Promise.resolve(t.data);return y(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}$e.create=(e,t)=>new $e({type:e,typeName:Be.ZodPromise,...j(t)});class Ae extends N{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:e=>{h(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===a.type){const e=a.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return m;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?m:"dirty"===r.status||"dirty"===t.value?v(r.value):r});{if("aborted"===t.value)return m;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?m:"dirty"===r.status||"dirty"===t.value?v(r.value):r}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?m:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?m:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===a.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!b(e))return e;const r=a.transform(e.value,i);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>b(e)?Promise.resolve(a.transform(e.value,i)).then(e=>({status:t.value,value:e})):e)}r.assertNever(a)}}Ae.create=(e,t,n)=>new Ae({schema:e,typeName:Be.ZodEffects,effect:t,...j(n)}),Ae.createWithPreprocess=(e,t,n)=>new Ae({schema:t,effect:{type:"preprocess",transform:e},typeName:Be.ZodEffects,...j(n)});let Ie=class extends N{_parse(e){return this._getType(e)===i.undefined?y(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ie.create=(e,t)=>new Ie({innerType:e,typeName:Be.ZodOptional,...j(t)});let Pe=class extends N{_parse(e){return this._getType(e)===i.null?y(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Pe.create=(e,t)=>new Pe({innerType:e,typeName:Be.ZodNullable,...j(t)});let Se=class extends N{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===i.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Se.create=(e,t)=>new Se({innerType:e,typeName:Be.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...j(t)});let Ce=class extends N{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return w(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new c(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new c(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ce.create=(e,t)=>new Ce({innerType:e,typeName:Be.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...j(t)});class Re extends N{_parse(e){if(this._getType(e)!==i.nan){const t=this._getOrReturnCtx(e);return h(t,{code:o.invalid_type,expected:i.nan,received:t.parsedType}),m}return{status:"valid",value:e.data}}}Re.create=e=>new Re({typeName:Be.ZodNaN,...j(e)});const Fe=Symbol("zod_brand");class Me extends N{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class De extends N{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?m:"dirty"===e.status?(t.dirty(),v(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?m:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new De({in:e,out:t,typeName:Be.ZodPipeline})}}let Le=class extends N{_parse(e){const t=this._def.innerType._parse(e),n=e=>(b(e)&&(e.value=Object.freeze(e.value)),e);return w(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}};function Ue(e,t={},n){return e?ue.create().superRefine((r,a)=>{var i,s;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,o=null===(s=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===s||s,c="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...c,fatal:o})}}):ue.create()}Le.create=(e,t)=>new Le({innerType:e,typeName:Be.ZodReadonly,...j(t)});const Ve={object:me.lazycreate};var Be;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Be||(Be={}));const We=ee.create,qe=ne.create,Ke=Re.create,Ge=re.create,Je=ae.create,Ye=ie.create,He=se.create,Xe=oe.create,Qe=ce.create,et=ue.create,tt=de.create,nt=le.create,rt=pe.create,at=he.create,it=me.create,st=me.strictCreate,ot=ve.create,ct=_e.create,ut=be.create,dt=we.create,lt=ke.create,pt=xe.create,ht=ze.create,ft=Ze.create,mt=Te.create,vt=Ee.create,yt=je.create,_t=Ne.create,gt=$e.create,bt=Ae.create,wt=Ie.create,kt=Pe.create,xt=Ae.createWithPreprocess,zt=De.create,Zt={string:e=>ee.create({...e,coerce:!0}),number:e=>ne.create({...e,coerce:!0}),boolean:e=>ae.create({...e,coerce:!0}),bigint:e=>re.create({...e,coerce:!0}),date:e=>ie.create({...e,coerce:!0})},Tt=m;var Et=Object.freeze({__proto__:null,defaultErrorMap:u,setErrorMap:function(e){d=e},getErrorMap:l,makeIssue:p,EMPTY_PATH:[],addIssueToContext:h,ParseStatus:f,INVALID:m,DIRTY:v,OK:y,isAborted:_,isDirty:g,isValid:b,isAsync:w,get util(){return r},get objectUtil(){return a},ZodParsedType:i,getParsedType:s,ZodType:N,datetimeRegex:Y,ZodString:ee,ZodNumber:ne,ZodBigInt:re,ZodBoolean:ae,ZodDate:ie,ZodSymbol:se,ZodUndefined:oe,ZodNull:ce,ZodAny:ue,ZodUnknown:de,ZodNever:le,ZodVoid:pe,ZodArray:he,ZodObject:me,ZodUnion:ve,ZodDiscriminatedUnion:_e,ZodIntersection:be,ZodTuple:we,ZodRecord:ke,ZodMap:xe,ZodSet:ze,ZodFunction:Ze,ZodLazy:Te,ZodLiteral:Ee,ZodEnum:je,ZodNativeEnum:Ne,ZodPromise:$e,ZodEffects:Ae,ZodTransformer:Ae,ZodOptional:Ie,ZodNullable:Pe,ZodDefault:Se,ZodCatch:Ce,ZodNaN:Re,BRAND:Fe,ZodBranded:Me,ZodPipeline:De,ZodReadonly:Le,custom:Ue,Schema:N,ZodSchema:N,late:Ve,get ZodFirstPartyTypeKind(){return Be},coerce:Zt,any:et,array:at,bigint:Ge,boolean:Je,date:Ye,discriminatedUnion:ct,effect:bt,enum:yt,function:ft,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Ue(t=>t instanceof e,t),intersection:ut,lazy:mt,literal:vt,map:pt,nan:Ke,nativeEnum:_t,never:nt,null:Qe,nullable:kt,number:qe,object:it,oboolean:()=>Je().optional(),onumber:()=>qe().optional(),optional:wt,ostring:()=>We().optional(),pipeline:zt,preprocess:xt,promise:gt,record:lt,set:ht,strictObject:st,string:We,symbol:He,transformer:bt,tuple:dt,undefined:Xe,union:ot,unknown:tt,void:rt,NEVER:Tt,ZodIssueCode:o,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:c}),Ot=["interface","display","layout","module","panel","theme"],jt=["hook","endpoint"],Nt=["operation"],$t="directus:extension",At=Et.object({app:Et.string(),api:Et.string()}),It=Et.object({request:Et.optional(Et.object({urls:Et.array(Et.string()),methods:Et.array(Et.union([Et.literal("GET"),Et.literal("POST"),Et.literal("PATCH"),Et.literal("PUT"),Et.literal("DELETE")]))})),log:Et.optional(Et.object({})),sleep:Et.optional(Et.object({}))}),Pt=Et.optional(Et.object({enabled:Et.boolean(),requestedScopes:It})),St=Et.union([Et.object({type:Et.enum(jt),name:Et.string(),source:Et.string()}),Et.object({type:Et.enum(Ot),name:Et.string(),source:Et.string()}),Et.object({type:Et.enum(Nt),name:Et.string(),source:At})]),Ct=Et.object({host:Et.string(),hidden:Et.boolean().optional()}),Rt=Et.object({type:Et.enum(Ot),path:Et.string(),source:Et.string()}),Ft=Et.object({type:Et.enum(jt),path:Et.string(),source:Et.string(),sandbox:Pt}),Mt=Et.object({type:Et.enum(Nt),path:At,source:At,sandbox:Pt}),Dt=Et.object({type:Et.literal("bundle"),partial:Et.boolean().optional(),path:At,entries:Et.array(St)});Et.array(St);var Lt=Ct.and(Et.union([Rt,Ft,Mt,Dt]));Et.object({name:Et.string(),version:Et.string(),type:Et.union([Et.literal("module"),Et.literal("commonjs")]).optional(),description:Et.string().optional(),icon:Et.string().optional(),dependencies:Et.record(Et.string()).optional(),devDependencies:Et.record(Et.string()).optional(),[$t]:Lt});class Ut{constructor(e,t){this.database=e,this.logger=t,this.tableName="directus_permissions"}async removeDuplicates(e){const t=await this.getPoliciesCollectionsAndActions(),n=[];for(const[r,a]of t)for(const[t,i]of a)for(const a of i){const i=await this.database(this.tableName).where({policy:r,collection:t,action:a}).orderBy("id","asc");if(i.length>1){this.logger.warn(`Duplicated permissions for policy ${r}, collection ${t}, action ${a} (${i.length} permissions)`);const[s,...o]="first"===e?i:i.reverse(),c=o.map(e=>e.id);await this.database(this.tableName).whereIn("id",c).delete(),n.push({policy:r,collection:t,action:a,ids:c}),this.logger.info(`Deleted ${c.length} duplicated permissions, keeping permission ${s.id}`)}}return n}async getPoliciesCollectionsAndActions(){var e,t;const n=await this.database(this.tableName).where({}),r=new Map;for(const a of n){const{policy:n,collection:i,action:s}=a,o=null!=(e=r.get(n))?e:new Map,c=null!=(t=o.get(i))?t:new Set;c.add(s),o.set(i,c),r.set(n,o)}return r}}class Vt{constructor(e){this.database=e,this.tableName="directus_sync_id_map"}async init(){return!await this.database.schema.hasTable(this.tableName)&&(await this.database.schema.createTable(this.tableName,e=>{e.increments("id").primary(),e.string("table").notNullable(),e.string("sync_id").notNullable(),e.string("local_id").notNullable(),e.timestamp("created_at").defaultTo(this.database.fn.now()),e.unique(["table","sync_id"]),e.unique(["table","local_id"]),e.index(["created_at"])}),!0)}getTableName(){return this.tableName}async getBySyncId(e,t){return await this.database(this.tableName).where({table:e,sync_id:t}).first()||null}async getByLocalId(e,t){return await this.database(this.tableName).where({table:e,local_id:t}).first()||null}async getAll(e){return this.database(this.tableName).where({table:e})}async add(t,n,r){const a=null!=r?r:e();return await this.database(this.tableName).insert({table:t,sync_id:a,local_id:n}),a}async removeBySyncId(e,t){await this.database(this.tableName).where({table:e,sync_id:t}).delete()}async removeByLocalId(e,t){await this.database(this.tableName).where({table:e,local_id:t}).delete()}}function Bt(e,t,n){function r(n,r){var a;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(a=n._zod).traits??(a.traits=new Set),n._zod.traits.add(e),t(n,r);for(const e in s.prototype)e in n||Object.defineProperty(n,e,{value:s.prototype[e].bind(n)});n._zod.constr=s,n._zod.def=r}const a=n?.Parent??Object;class i extends a{}function s(e){var t;const a=n?.Parent?new i:this;r(a,e),(t=a._zod).deferred??(t.deferred=[]);for(const e of a._zod.deferred)e();return a}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class Wt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class qt extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const Kt={};function Gt(e){return e&&Object.assign(Kt,e),Kt}function Jt(e,t){return"bigint"==typeof t?t.toString():t}function Yt(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Ht(e){return null==e}function Xt(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}const Qt=Symbol("evaluating");function en(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==Qt)return void 0===r&&(r=Qt,r=n()),r},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function tn(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function nn(...e){const t={};for(const n of e){const e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}function rn(e){return JSON.stringify(e)}const an="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function sn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const on=Yt(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function cn(e){if(!1===sn(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==sn(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}function un(e){return cn(e)?{...e}:Array.isArray(e)?[...e]:e}const dn=new Set(["string","number","symbol"]);function ln(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pn(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function hn(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}const fn={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function mn(e,t=0){if(!0===e.aborted)return!0;for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function vn(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function yn(e){return"string"==typeof e?e:e?.message}function _n(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const a=yn(e.inst?._zod.def?.error?.(e))??yn(t?.error?.(e))??yn(n.customError?.(e))??yn(n.localeError?.(e))??"Invalid input";r.message=a}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function gn(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function bn(...e){const[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}const wn=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Jt,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},kn=Bt("$ZodError",wn),xn=Bt("$ZodError",wn,{Parent:Error});const zn=e=>(t,n,r,a)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise)throw new Wt;if(s.issues.length){const t=new(a?.Err??e)(s.issues.map(e=>_n(e,i,Gt())));throw an(t,a?.callee),t}return s.value},Zn=e=>async(t,n,r,a)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){const t=new(a?.Err??e)(s.issues.map(e=>_n(e,i,Gt())));throw an(t,a?.callee),t}return s.value},Tn=e=>(t,n,r)=>{const a=r?{...r,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},a);if(i instanceof Promise)throw new Wt;return i.issues.length?{success:!1,error:new(e??kn)(i.issues.map(e=>_n(e,a,Gt())))}:{success:!0,data:i.value}},En=Tn(xn),On=e=>async(t,n,r)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>_n(e,a,Gt())))}:{success:!0,data:i.value}},jn=On(xn),Nn=e=>(t,n,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return zn(e)(t,n,a)},$n=e=>(t,n,r)=>zn(e)(t,n,r),An=e=>async(t,n,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Zn(e)(t,n,a)},In=e=>async(t,n,r)=>Zn(e)(t,n,r),Pn=e=>(t,n,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Tn(e)(t,n,a)},Sn=e=>(t,n,r)=>Tn(e)(t,n,r),Cn=e=>async(t,n,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return On(e)(t,n,a)},Rn=e=>async(t,n,r)=>On(e)(t,n,r),Fn=/^[cC][^\s-]{8,}$/,Mn=/^[0-9a-z]+$/,Dn=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ln=/^[0-9a-vA-V]{20}$/,Un=/^[A-Za-z0-9]{27}$/,Vn=/^[a-zA-Z0-9_-]{21}$/,Bn=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Wn=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,qn=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Kn=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;const Gn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Jn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Yn=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Hn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Xn=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Qn=/^[A-Za-z0-9_-]*$/,er=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,tr=/^\+(?:[0-9]){6,14}[0-9]$/,nr="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",rr=new RegExp(`^${nr}$`);function ar(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}const ir=/^-?\d+$/,sr=/^-?\d+(?:\.\d+)?/,or=/^[^A-Z]*$/,cr=/^[^a-z]*$/,ur=Bt("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),dr={number:"number",bigint:"bigint",object:"date"},lr=Bt("$ZodCheckLessThan",(e,t)=>{ur.init(e,t);const n=dr[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),pr=Bt("$ZodCheckGreaterThan",(e,t)=>{ur.init(e,t);const n=dr[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),hr=Bt("$ZodCheckMultipleOf",(e,t)=>{ur.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===function(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let a=(r.split(".")[1]||"").length;if(0===a&&/\d?e-\d?/.test(r)){const e=r.match(/\d?e-(\d?)/);e?.[1]&&(a=Number.parseInt(e[1]))}const i=n>a?n:a;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),fr=Bt("$ZodCheckNumberFormat",(e,t)=>{ur.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[a,i]=fn[t.format];e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,r.minimum=a,r.maximum=i,n&&(r.pattern=ir)}),e._zod.check=s=>{const o=s.value;if(n){if(!Number.isInteger(o))return void s.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?s.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):s.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}o<a&&s.issues.push({origin:"number",input:o,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),o>i&&s.issues.push({origin:"number",input:o,code:"too_big",maximum:i,inst:e})}}),mr=Bt("$ZodCheckMaxLength",(e,t)=>{var n;ur.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ht(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const a=gn(r);n.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),vr=Bt("$ZodCheckMinLength",(e,t)=>{var n;ur.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ht(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const a=gn(r);n.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),yr=Bt("$ZodCheckLengthEquals",(e,t)=>{var n;ur.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!Ht(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const r=n.value,a=r.length;if(a===t.length)return;const i=gn(r),s=a>t.length;n.issues.push({origin:i,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),_r=Bt("$ZodCheckStringFormat",(e,t)=>{var n,r;ur.init(e,t),e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),gr=Bt("$ZodCheckRegex",(e,t)=>{_r.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),br=Bt("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=or),_r.init(e,t)}),wr=Bt("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=cr),_r.init(e,t)}),kr=Bt("$ZodCheckIncludes",(e,t)=>{ur.init(e,t);const n=ln(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),xr=Bt("$ZodCheckStartsWith",(e,t)=>{ur.init(e,t);const n=new RegExp(`^${ln(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),zr=Bt("$ZodCheckEndsWith",(e,t)=>{ur.init(e,t);const n=new RegExp(`.*${ln(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Zr=Bt("$ZodCheckOverwrite",(e,t)=>{ur.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class Tr{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const e of r)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const Er={major:4,minor:1,patch:11},Or=Bt("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Er;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const t of r)for(const n of t._zod.onattach)n(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let r,a=mn(e);for(const i of t){if(i._zod.def.when){if(!i._zod.def.when(e))continue}else if(a)continue;const t=e.issues.length,s=i._zod.check(e);if(s instanceof Promise&&!1===n?.async)throw new Wt;if(r||s instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await s;e.issues.length!==t&&(a||(a=mn(e,t)))});else{if(e.issues.length===t)continue;a||(a=mn(e,t))}}return r?r.then(()=>e):e},n=(n,a,i)=>{if(mn(n))return n.aborted=!0,n;const s=t(a,r,i);if(s instanceof Promise){if(!1===i.async)throw new Wt;return s.then(t=>e._zod.parse(t,i))}return e._zod.parse(s,i)};e._zod.run=(a,i)=>{if(i.skipChecks)return e._zod.parse(a,i);if("backward"===i.direction){const t=e._zod.parse({value:a.value,issues:[]},{...i,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,a,i)):n(t,a,i)}const s=e._zod.parse(a,i);if(s instanceof Promise){if(!1===i.async)throw new Wt;return s.then(e=>t(e,r,i))}return t(s,r,i)}}e["~standard"]={validate:t=>{try{const n=En(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return jn(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),jr=Bt("$ZodString",(e,t)=>{var n;Or.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(n=e._zod.bag,new RegExp(`^${n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(r){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Nr=Bt("$ZodStringFormat",(e,t)=>{_r.init(e,t),jr.init(e,t)}),$r=Bt("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Wn),Nr.init(e,t)}),Ar=Bt("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=qn(e))}else t.pattern??(t.pattern=qn());Nr.init(e,t)}),Ir=Bt("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Kn),Nr.init(e,t)}),Pr=Bt("$ZodURL",(e,t)=>{Nr.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),a=new URL(r);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:er.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(t.normalize?n.value=a.href:n.value=r)}catch(r){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Sr=Bt("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Nr.init(e,t)}),Cr=Bt("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Vn),Nr.init(e,t)}),Rr=Bt("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Fn),Nr.init(e,t)}),Fr=Bt("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Mn),Nr.init(e,t)}),Mr=Bt("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Dn),Nr.init(e,t)}),Dr=Bt("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Ln),Nr.init(e,t)}),Lr=Bt("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Un),Nr.init(e,t)}),Ur=Bt("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){const t=ar({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${nr}T(?:${r})$`)}(t)),Nr.init(e,t)}),Vr=Bt("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=rr),Nr.init(e,t)}),Br=Bt("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=new RegExp(`^${ar(t)}$`)),Nr.init(e,t)}),Wr=Bt("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Bn),Nr.init(e,t)}),qr=Bt("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Gn),Nr.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),Kr=Bt("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Jn),Nr.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Gr=Bt("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Yn),Nr.init(e,t)}),Jr=Bt("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Hn),Nr.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(2!==r.length)throw new Error;const[e,t]=r;if(!t)throw new Error;const n=Number(t);if(`${n}`!==t)throw new Error;if(n<0||n>128)throw new Error;new URL(`http://[${e}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Yr(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const Hr=Bt("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Xn),Nr.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Yr(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});const Xr=Bt("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Qn),Nr.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{(function(e){if(!Qn.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return Yr(t.padEnd(4*Math.ceil(t.length/4),"="))})(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Qr=Bt("$ZodE164",(e,t)=>{t.pattern??(t.pattern=tr),Nr.init(e,t)});const ea=Bt("$ZodJWT",(e,t)=>{Nr.init(e,t),e._zod.check=n=>{(function(e,t=null){try{const n=e.split(".");if(3!==n.length)return!1;const[r]=n;if(!r)return!1;const a=JSON.parse(atob(r));return!("typ"in a&&"JWT"!==a?.typ||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}})(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),ta=Bt("$ZodNumber",(e,t)=>{Or.init(e,t),e._zod.pattern=e._zod.bag.pattern??sr,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}const a=n.value;if("number"==typeof a&&!Number.isNaN(a)&&Number.isFinite(a))return n;const i="number"==typeof a?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...i?{received:i}:{}}),n}}),na=Bt("$ZodNumber",(e,t)=>{fr.init(e,t),ta.init(e,t)}),ra=Bt("$ZodUnknown",(e,t)=>{Or.init(e,t),e._zod.parse=e=>e}),aa=Bt("$ZodNever",(e,t)=>{Or.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function ia(e,t,n){e.issues.length&&t.issues.push(...vn(n,e.issues)),t.value[n]=e.value}const sa=Bt("$ZodArray",(e,t)=>{Or.init(e,t),e._zod.parse=(n,r)=>{const a=n.value;if(!Array.isArray(a))return n.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),n;n.value=Array(a.length);const i=[];for(let e=0;e<a.length;e++){const s=a[e],o=t.element._zod.run({value:s,issues:[]},r);o instanceof Promise?i.push(o.then(t=>ia(t,n,e))):ia(o,n,e)}return i.length?Promise.all(i).then(()=>n):n}});function oa(e,t,n,r){e.issues.length&&t.issues.push(...vn(n,e.issues)),void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function ca(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=(r=e.shape,Object.keys(r).filter(e=>"optional"===r[e]._zod.optin&&"optional"===r[e]._zod.optout));var r;return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function ua(e,t,n,r,a,i){const s=[],o=a.keySet,c=a.catchall._zod,u=c.def.type;for(const a of Object.keys(t)){if(o.has(a))continue;if("never"===u){s.push(a);continue}const i=c.run({value:t[a],issues:[]},r);i instanceof Promise?e.push(i.then(e=>oa(e,n,a,t))):oa(i,n,a,t)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:i}),e.length?Promise.all(e).then(()=>n):n}const da=Bt("$ZodObject",(e,t)=>{Or.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){const e=t.shape;Object.defineProperty(t,"shape",{get:()=>{const n={...e};return Object.defineProperty(t,"shape",{value:n}),n}})}const r=Yt(()=>ca(t));en(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(const e of r.values)n[t].add(e)}}return n});const a=sn,i=t.catchall;let s;e._zod.parse=(t,n)=>{s??(s=r.value);const o=t.value;if(!a(o))return t.issues.push({expected:"object",code:"invalid_type",input:o,inst:e}),t;t.value={};const c=[],u=s.shape;for(const e of s.keys){const r=u[e]._zod.run({value:o[e],issues:[]},n);r instanceof Promise?c.push(r.then(n=>oa(n,t,e,o))):oa(r,t,e,o)}return i?ua(c,o,t,n,r.value,e):c.length?Promise.all(c).then(()=>t):t}}),la=Bt("$ZodObjectJIT",(e,t)=>{da.init(e,t);const n=e._zod.parse,r=Yt(()=>ca(t));let a;const i=sn,s=!Kt.jitless,o=s&&on.value,c=t.catchall;let u;e._zod.parse=(d,l)=>{u??(u=r.value);const p=d.value;return i(p)?s&&o&&!1===l?.async&&!0!==l.jitless?(a||(a=(e=>{const t=new Tr(["shape","payload","ctx"]),n=r.value,a=e=>{const t=rn(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const i=Object.create(null);let s=0;for(const e of n.keys)i[e]="key_"+s++;t.write("const newResult = {};");for(const e of n.keys){const n=i[e],r=rn(e);t.write(`const ${n} = ${a(e)};`),t.write(`\n        if (${n}.issues.length) {\n          payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${r}, ...iss.path] : [${r}]\n          })));\n        }\n        \n        \n        if (${n}.value === undefined) {\n          if (${r} in input) {\n            newResult[${r}] = undefined;\n          }\n        } else {\n          newResult[${r}] = ${n}.value;\n        }\n        \n      `)}t.write("payload.value = newResult;"),t.write("return payload;");const o=t.compile();return(t,n)=>o(e,t,n)})(t.shape)),d=a(d,l),c?ua([],p,d,l,u,e):d):n(d,l):(d.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),d)}});function pa(e,t,n,r){for(const n of e)if(0===n.issues.length)return t.value=n.value,t;const a=e.filter(e=>!mn(e));return 1===a.length?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>_n(e,r,Gt())))}),t)}const ha=Bt("$ZodUnion",(e,t)=>{Or.init(e,t),en(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),en(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),en(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),en(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>Xt(e.source)).join("|")})$`)}});const n=1===t.options.length,r=t.options[0]._zod.run;e._zod.parse=(a,i)=>{if(n)return r(a,i);let s=!1;const o=[];for(const e of t.options){const t=e._zod.run({value:a.value,issues:[]},i);if(t instanceof Promise)o.push(t),s=!0;else{if(0===t.issues.length)return t;o.push(t)}}return s?Promise.all(o).then(t=>pa(t,a,e,i)):pa(o,a,e,i)}}),fa=Bt("$ZodIntersection",(e,t)=>{Or.init(e,t),e._zod.parse=(e,n)=>{const r=e.value,a=t.left._zod.run({value:r,issues:[]},n),i=t.right._zod.run({value:r,issues:[]},n);return a instanceof Promise||i instanceof Promise?Promise.all([a,i]).then(([t,n])=>va(e,t,n)):va(e,a,i)}});function ma(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(cn(e)&&cn(t)){const n=Object.keys(t),r=Object.keys(e).filter(e=>-1!==n.indexOf(e)),a={...e,...t};for(const n of r){const r=ma(e[n],t[n]);if(!r.valid)return{valid:!1,mergeErrorPath:[n,...r.mergeErrorPath]};a[n]=r.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const a=ma(e[r],t[r]);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function va(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),mn(e))return e;const r=ma(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const ya=Bt("$ZodEnum",(e,t)=>{Or.init(e,t);const n=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(e=>dn.has(typeof e)).map(e=>"string"==typeof e?ln(e):e.toString()).join("|")})$`),e._zod.parse=(t,a)=>{const i=t.value;return r.has(i)||t.issues.push({code:"invalid_value",values:n,input:i,inst:e}),t}}),_a=Bt("$ZodTransform",(e,t)=>{Or.init(e,t),e._zod.parse=(n,r)=>{if("backward"===r.direction)throw new qt(e.constructor.name);const a=t.transform(n.value,n);if(r.async){return(a instanceof Promise?a:Promise.resolve(a)).then(e=>(n.value=e,n))}if(a instanceof Promise)throw new Wt;return n.value=a,n}});function ga(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const ba=Bt("$ZodOptional",(e,t)=>{Or.init(e,t),e._zod.optin="optional",e._zod.optout="optional",en(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),en(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Xt(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if("optional"===t.innerType._zod.optin){const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>ga(t,e.value)):ga(r,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}}),wa=Bt("$ZodNullable",(e,t)=>{Or.init(e,t),en(e._zod,"optin",()=>t.innerType._zod.optin),en(e._zod,"optout",()=>t.innerType._zod.optout),en(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Xt(e.source)}|null)$`):void 0}),en(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),ka=Bt("$ZodDefault",(e,t)=>{Or.init(e,t),e._zod.optin="optional",en(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>xa(e,t)):xa(r,t)}});function xa(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const za=Bt("$ZodPrefault",(e,t)=>{Or.init(e,t),e._zod.optin="optional",en(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>("backward"===n.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),Za=Bt("$ZodNonOptional",(e,t)=>{Or.init(e,t),en(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,r)=>{const a=t.innerType._zod.run(n,r);return a instanceof Promise?a.then(t=>Ta(t,e)):Ta(a,e)}});function Ta(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Ea=Bt("$ZodCatch",(e,t)=>{Or.init(e,t),en(e._zod,"optin",()=>t.innerType._zod.optin),en(e._zod,"optout",()=>t.innerType._zod.optout),en(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>_n(e,n,Gt()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>_n(e,n,Gt()))},input:e.value}),e.issues=[]),e)}}),Oa=Bt("$ZodPipe",(e,t)=>{Or.init(e,t),en(e._zod,"values",()=>t.in._zod.values),en(e._zod,"optin",()=>t.in._zod.optin),en(e._zod,"optout",()=>t.out._zod.optout),en(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if("backward"===n.direction){const r=t.out._zod.run(e,n);return r instanceof Promise?r.then(e=>ja(e,t.in,n)):ja(r,t.in,n)}const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>ja(e,t.out,n)):ja(r,t.out,n)}});function ja(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const Na=Bt("$ZodReadonly",(e,t)=>{Or.init(e,t),en(e._zod,"propValues",()=>t.innerType._zod.propValues),en(e._zod,"values",()=>t.innerType._zod.values),en(e._zod,"optin",()=>t.innerType._zod.optin),en(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then($a):$a(r)}});function $a(e){return e.value=Object.freeze(e.value),e}const Aa=Bt("$ZodCustom",(e,t)=>{ur.init(e,t),Or.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const r=n.value,a=t.fn(r);if(a instanceof Promise)return a.then(t=>Ia(t,n,r,e));Ia(a,n,r,e)}});function Ia(e,t,n,r){if(!e){const e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(bn(e))}}class Pa{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&"object"==typeof n&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};delete n.id;const r={...n,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Sa(){return new Pa}const Ca=Sa();function Ra(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...hn(t)})}function Fa(e,t){return new lr({check:"less_than",...hn(t),value:e,inclusive:!1})}function Ma(e,t){return new lr({check:"less_than",...hn(t),value:e,inclusive:!0})}function Da(e,t){return new pr({check:"greater_than",...hn(t),value:e,inclusive:!1})}function La(e,t){return new pr({check:"greater_than",...hn(t),value:e,inclusive:!0})}function Ua(e,t){return new hr({check:"multiple_of",...hn(t),value:e})}function Va(e,t){return new mr({check:"max_length",...hn(t),maximum:e})}function Ba(e,t){return new vr({check:"min_length",...hn(t),minimum:e})}function Wa(e,t){return new yr({check:"length_equals",...hn(t),length:e})}function qa(e){return new Zr({check:"overwrite",tx:e})}function Ka(e){const t=function(e,t){const n=new ur({check:"custom",...hn(t)});return n._zod.check=e,n}(n=>(n.addIssue=e=>{if("string"==typeof e)n.issues.push(bn(e,n.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(bn(r))}},e(n.value,n)));return t}const Ga=Bt("ZodISODateTime",(e,t)=>{Ur.init(e,t),wi.init(e,t)});function Ja(e){return function(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...hn(t)})}(Ga,e)}const Ya=Bt("ZodISODate",(e,t)=>{Vr.init(e,t),wi.init(e,t)});function Ha(e){return function(e,t){return new e({type:"string",format:"date",check:"string_format",...hn(t)})}(Ya,e)}const Xa=Bt("ZodISOTime",(e,t)=>{Br.init(e,t),wi.init(e,t)});function Qa(e){return function(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...hn(t)})}(Xa,e)}const ei=Bt("ZodISODuration",(e,t)=>{Wr.init(e,t),wi.init(e,t)});function ti(e){return function(e,t){return new e({type:"string",format:"duration",check:"string_format",...hn(t)})}(ei,e)}const ni=(e,t)=>{kn.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e,t){const n=t||function(e){return e.message},r={_errors:[]},a=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>a({issues:e}));else if("invalid_key"===t.code)a({issues:t.issues});else if("invalid_element"===t.code)a({issues:t.issues});else if(0===t.path.length)r._errors.push(n(t));else{let e=r,a=0;for(;a<t.path.length;){const r=t.path[a];a===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(t))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(e),r}(e,t)},flatten:{value:t=>function(e,t=e=>e.message){const n={},r=[];for(const a of e.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,Jt,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,Jt,2)}},isEmpty:{get:()=>0===e.issues.length}})},ri=Bt("ZodError",ni),ai=Bt("ZodError",ni,{Parent:Error}),ii=zn(ai),si=Zn(ai),oi=Tn(ai),ci=On(ai),ui=Nn(ai),di=$n(ai),li=An(ai),pi=In(ai),hi=Pn(ai),fi=Sn(ai),mi=Cn(ai),vi=Rn(ai),yi=Bt("ZodType",(e,t)=>(Or.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(nn(t,{checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,n)=>pn(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>ii(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>oi(e,t,n),e.parseAsync=async(t,n)=>si(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>ci(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>ui(e,t,n),e.decode=(t,n)=>di(e,t,n),e.encodeAsync=async(t,n)=>li(e,t,n),e.decodeAsync=async(t,n)=>pi(e,t,n),e.safeEncode=(t,n)=>hi(e,t,n),e.safeDecode=(t,n)=>fi(e,t,n),e.safeEncodeAsync=async(t,n)=>mi(e,t,n),e.safeDecodeAsync=async(t,n)=>vi(e,t,n),e.refine=(t,n)=>e.check(function(e,t={}){return function(e,t,n){return new e({type:"custom",check:"custom",fn:t,...hn(n)})}(fs,e,t)}(t,n)),e.superRefine=t=>e.check(Ka(t)),e.overwrite=t=>e.check(qa(t)),e.optional=()=>as(e),e.nullable=()=>ss(e),e.nullish=()=>as(ss(e)),e.nonoptional=t=>function(e,t){return new us({type:"nonoptional",innerType:e,...hn(t)})}(e,t),e.array=()=>{return function(e,t,n){return new e({type:"array",element:t,...hn(n)})}(Ji,e,t);var t},e.or=t=>{return new Xi({type:"union",options:[e,t],...hn(n)});var n},e.and=t=>new Qi({type:"intersection",left:e,right:t}),e.transform=t=>ps(e,new ns({type:"transform",transform:t})),e.default=t=>{return n=t,new os({type:"default",innerType:e,get defaultValue(){return"function"==typeof n?n():un(n)}});var n},e.prefault=t=>{return n=t,new cs({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof n?n():un(n)}});var n},e.catch=t=>{return new ds({type:"catch",innerType:e,catchValue:"function"==typeof(n=t)?n:()=>n});var n},e.pipe=t=>ps(e,t),e.readonly=()=>new hs({type:"readonly",innerType:e}),e.describe=t=>{const n=e.clone();return Ca.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>Ca.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return Ca.get(e);const n=e.clone();return Ca.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),_i=Bt("_ZodString",(e,t)=>{jr.init(e,t),yi.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new gr({check:"string_format",format:"regex",...hn(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new kr({check:"string_format",format:"includes",...hn(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new xr({check:"string_format",format:"starts_with",...hn(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new zr({check:"string_format",format:"ends_with",...hn(t),suffix:e})}(...t)),e.min=(...t)=>e.check(Ba(...t)),e.max=(...t)=>e.check(Va(...t)),e.length=(...t)=>e.check(Wa(...t)),e.nonempty=(...t)=>e.check(Ba(1,...t)),e.lowercase=t=>e.check(function(e){return new br({check:"string_format",format:"lowercase",...hn(e)})}(t)),e.uppercase=t=>e.check(function(e){return new wr({check:"string_format",format:"uppercase",...hn(e)})}(t)),e.trim=()=>e.check(qa(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return qa(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(qa(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(qa(e=>e.toUpperCase()))}),gi=Bt("ZodString",(e,t)=>{jr.init(e,t),_i.init(e,t),e.email=t=>e.check(function(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...hn(t)})}(ki,t)),e.url=t=>e.check(function(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...hn(t)})}(Zi,t)),e.jwt=t=>e.check(function(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...hn(t)})}(Di,t)),e.emoji=t=>e.check(function(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...hn(t)})}(Ti,t)),e.guid=t=>e.check(Ra(xi,t)),e.uuid=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...hn(t)})}(zi,t)),e.uuidv4=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...hn(t)})}(zi,t)),e.uuidv6=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...hn(t)})}(zi,t)),e.uuidv7=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...hn(t)})}(zi,t)),e.nanoid=t=>e.check(function(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...hn(t)})}(Ei,t)),e.guid=t=>e.check(Ra(xi,t)),e.cuid=t=>e.check(function(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...hn(t)})}(Oi,t)),e.cuid2=t=>e.check(function(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...hn(t)})}(ji,t)),e.ulid=t=>e.check(function(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...hn(t)})}(Ni,t)),e.base64=t=>e.check(function(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...hn(t)})}(Ri,t)),e.base64url=t=>e.check(function(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...hn(t)})}(Fi,t)),e.xid=t=>e.check(function(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...hn(t)})}($i,t)),e.ksuid=t=>e.check(function(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...hn(t)})}(Ai,t)),e.ipv4=t=>e.check(function(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...hn(t)})}(Ii,t)),e.ipv6=t=>e.check(function(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...hn(t)})}(Pi,t)),e.cidrv4=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...hn(t)})}(Si,t)),e.cidrv6=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...hn(t)})}(Ci,t)),e.e164=t=>e.check(function(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...hn(t)})}(Mi,t)),e.datetime=t=>e.check(Ja(t)),e.date=t=>e.check(Ha(t)),e.time=t=>e.check(Qa(t)),e.duration=t=>e.check(ti(t))});function bi(e){return function(e,t){return new e({type:"string",...hn(t)})}(gi,e)}const wi=Bt("ZodStringFormat",(e,t)=>{Nr.init(e,t),_i.init(e,t)}),ki=Bt("ZodEmail",(e,t)=>{Ir.init(e,t),wi.init(e,t)}),xi=Bt("ZodGUID",(e,t)=>{$r.init(e,t),wi.init(e,t)}),zi=Bt("ZodUUID",(e,t)=>{Ar.init(e,t),wi.init(e,t)}),Zi=Bt("ZodURL",(e,t)=>{Pr.init(e,t),wi.init(e,t)}),Ti=Bt("ZodEmoji",(e,t)=>{Sr.init(e,t),wi.init(e,t)}),Ei=Bt("ZodNanoID",(e,t)=>{Cr.init(e,t),wi.init(e,t)}),Oi=Bt("ZodCUID",(e,t)=>{Rr.init(e,t),wi.init(e,t)}),ji=Bt("ZodCUID2",(e,t)=>{Fr.init(e,t),wi.init(e,t)}),Ni=Bt("ZodULID",(e,t)=>{Mr.init(e,t),wi.init(e,t)}),$i=Bt("ZodXID",(e,t)=>{Dr.init(e,t),wi.init(e,t)}),Ai=Bt("ZodKSUID",(e,t)=>{Lr.init(e,t),wi.init(e,t)}),Ii=Bt("ZodIPv4",(e,t)=>{qr.init(e,t),wi.init(e,t)}),Pi=Bt("ZodIPv6",(e,t)=>{Kr.init(e,t),wi.init(e,t)}),Si=Bt("ZodCIDRv4",(e,t)=>{Gr.init(e,t),wi.init(e,t)}),Ci=Bt("ZodCIDRv6",(e,t)=>{Jr.init(e,t),wi.init(e,t)}),Ri=Bt("ZodBase64",(e,t)=>{Hr.init(e,t),wi.init(e,t)}),Fi=Bt("ZodBase64URL",(e,t)=>{Xr.init(e,t),wi.init(e,t)}),Mi=Bt("ZodE164",(e,t)=>{Qr.init(e,t),wi.init(e,t)}),Di=Bt("ZodJWT",(e,t)=>{ea.init(e,t),wi.init(e,t)}),Li=Bt("ZodNumber",(e,t)=>{ta.init(e,t),yi.init(e,t),e.gt=(t,n)=>e.check(Da(t,n)),e.gte=(t,n)=>e.check(La(t,n)),e.min=(t,n)=>e.check(La(t,n)),e.lt=(t,n)=>e.check(Fa(t,n)),e.lte=(t,n)=>e.check(Ma(t,n)),e.max=(t,n)=>e.check(Ma(t,n)),e.int=t=>e.check(Bi(t)),e.safe=t=>e.check(Bi(t)),e.positive=t=>e.check(Da(0,t)),e.nonnegative=t=>e.check(La(0,t)),e.negative=t=>e.check(Fa(0,t)),e.nonpositive=t=>e.check(Ma(0,t)),e.multipleOf=(t,n)=>e.check(Ua(t,n)),e.step=(t,n)=>e.check(Ua(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Ui(e){return function(e,t){return new e({type:"number",checks:[],...hn(t)})}(Li,e)}const Vi=Bt("ZodNumberFormat",(e,t)=>{na.init(e,t),Li.init(e,t)});function Bi(e){return function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...hn(t)})}(Vi,e)}const Wi=Bt("ZodUnknown",(e,t)=>{ra.init(e,t),yi.init(e,t)});function qi(){return new Wi({type:"unknown"})}const Ki=Bt("ZodNever",(e,t)=>{aa.init(e,t),yi.init(e,t)});function Gi(e){return function(e,t){return new e({type:"never",...hn(t)})}(Ki,e)}const Ji=Bt("ZodArray",(e,t)=>{sa.init(e,t),yi.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(Ba(t,n)),e.nonempty=t=>e.check(Ba(1,t)),e.max=(t,n)=>e.check(Va(t,n)),e.length=(t,n)=>e.check(Wa(t,n)),e.unwrap=()=>e.element});const Yi=Bt("ZodObject",(e,t)=>{la.init(e,t),yi.init(e,t),en(e,"shape",()=>t.shape),e.keyof=()=>ts(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:qi()}),e.loose=()=>e.clone({...e._zod.def,catchall:qi()}),e.strict=()=>e.clone({...e._zod.def,catchall:Gi()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!cn(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=nn(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return tn(this,"shape",n),n},checks:[]});return pn(e,r)}(e,t),e.safeExtend=t=>function(e,t){if(!cn(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return tn(this,"shape",n),n},checks:e._zod.def.checks};return pn(e,n)}(e,t),e.merge=t=>function(e,t){const n=nn(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return tn(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return pn(e,n)}(e,t),e.pick=t=>function(e,t){const n=e._zod.def;return pn(e,nn(e._zod.def,{get shape(){const e={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=n.shape[r])}return tn(this,"shape",e),e},checks:[]}))}(e,t),e.omit=t=>function(e,t){const n=e._zod.def,r=nn(e._zod.def,{get shape(){const r={...e._zod.def.shape};for(const e in t){if(!(e in n.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return tn(this,"shape",r),r},checks:[]});return pn(e,r)}(e,t),e.partial=(...t)=>function(e,t,n){const r=nn(t._zod.def,{get shape(){const r=t._zod.def.shape,a={...r};if(n)for(const t in n){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(a[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(const t in r)a[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return tn(this,"shape",a),a},checks:[]});return pn(t,r)}(rs,e,t[0]),e.required=(...t)=>function(e,t,n){const r=nn(t._zod.def,{get shape(){const r=t._zod.def.shape,a={...r};if(n)for(const t in n){if(!(t in a))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(a[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(const t in r)a[t]=new e({type:"nonoptional",innerType:r[t]});return tn(this,"shape",a),a},checks:[]});return pn(t,r)}(us,e,t[0])});function Hi(e,t){const n={type:"object",shape:e??{},...hn(t)};return new Yi(n)}const Xi=Bt("ZodUnion",(e,t)=>{ha.init(e,t),yi.init(e,t),e.options=t.options});const Qi=Bt("ZodIntersection",(e,t)=>{fa.init(e,t),yi.init(e,t)});const es=Bt("ZodEnum",(e,t)=>{ya.init(e,t),yi.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const a={};for(const r of e){if(!n.has(r))throw new Error(`Key ${r} not found in enum`);a[r]=t.entries[r]}return new es({...t,checks:[],...hn(r),entries:a})},e.exclude=(e,r)=>{const a={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete a[t]}return new es({...t,checks:[],...hn(r),entries:a})}});function ts(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new es({type:"enum",entries:n,...hn(t)})}const ns=Bt("ZodTransform",(e,t)=>{_a.init(e,t),yi.init(e,t),e._zod.parse=(n,r)=>{if("backward"===r.direction)throw new qt(e.constructor.name);n.addIssue=r=>{if("string"==typeof r)n.issues.push(bn(r,n.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=e),n.issues.push(bn(t))}};const a=t.transform(n.value,n);return a instanceof Promise?a.then(e=>(n.value=e,n)):(n.value=a,n)}});const rs=Bt("ZodOptional",(e,t)=>{ba.init(e,t),yi.init(e,t),e.unwrap=()=>e._zod.def.innerType});function as(e){return new rs({type:"optional",innerType:e})}const is=Bt("ZodNullable",(e,t)=>{wa.init(e,t),yi.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ss(e){return new is({type:"nullable",innerType:e})}const os=Bt("ZodDefault",(e,t)=>{ka.init(e,t),yi.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});const cs=Bt("ZodPrefault",(e,t)=>{za.init(e,t),yi.init(e,t),e.unwrap=()=>e._zod.def.innerType});const us=Bt("ZodNonOptional",(e,t)=>{Za.init(e,t),yi.init(e,t),e.unwrap=()=>e._zod.def.innerType});const ds=Bt("ZodCatch",(e,t)=>{Ea.init(e,t),yi.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});const ls=Bt("ZodPipe",(e,t)=>{Oa.init(e,t),yi.init(e,t),e.in=t.in,e.out=t.out});function ps(e,t){return new ls({type:"pipe",in:e,out:t})}const hs=Bt("ZodReadonly",(e,t)=>{Na.init(e,t),yi.init(e,t),e.unwrap=()=>e._zod.def.innerType});const fs=Bt("ZodCustom",(e,t)=>{Aa.init(e,t),yi.init(e,t)});var ms={exports:{}},vs=t.relative,ys=function(e){if(!e)throw new TypeError("argument namespace is required");var t=ks(Es()[1])[0];function n(e){ws.call(n,e)}return n._file=t,n._ignored=function(e){if(process.noDeprecation)return!0;return gs(process.env.NO_DEPRECATION||"",e)}(e),n._namespace=e,n._traced=function(e){if(process.traceDeprecation)return!0;return gs(process.env.TRACE_DEPRECATION||"",e)}(e),n._warned=Object.create(null),n.function=js,n.property=Ns,n},_s=process.cwd();
/*!
 * depd
 * Copyright(c) 2014-2018 Douglas Christopher Wilson
 * MIT Licensed
 */function gs(e,t){for(var n=e.split(/[ ,]+/),r=String(t).toLowerCase(),a=0;a<n.length;a++){var i=n[a];if(i&&("*"===i||i.toLowerCase()===r))return!0}return!1}function bs(e){var t=this.name+": "+this.namespace;this.message&&(t+=" deprecated "+this.message);for(var n=0;n<e.length;n++)t+="\n    at "+e[n].toString();return t}function ws(e,t){var n,r,a=(n=process,r="deprecation",("function"!=typeof n.listenerCount?n.listeners(r).length:n.listenerCount(r))>0);if(a||!this._ignored){var i,s,o,c,u=0,d=!1,l=Es(),p=this._file;for(t?(c=t,(o=ks(l[1])).name=c.name,p=o[0]):o=c=ks(l[u=2]);u<l.length;u++)if((s=(i=ks(l[u]))[0])===p)d=!0;else if(s===this._file)p=this._file;else if(d)break;var h=i?c.join(":")+"__"+i.join(":"):void 0;if(void 0===h||!(h in this._warned)){this._warned[h]=!0;var f=e;if(f||(f=o!==c&&o.name?xs(o):xs(c)),a){var m=$s(this._namespace,f,l.slice(u));process.emit("deprecation",m)}else{var v=(process.stderr.isTTY?Zs:zs).call(this,f,i,l.slice(u));process.stderr.write(v+"\n","utf8")}}}}function ks(e){var t=e.getFileName()||"<anonymous>",n=e.getLineNumber(),r=e.getColumnNumber();e.isEval()&&(t=e.getEvalOrigin()+", "+t);var a=[t,n,r];return a.callSite=e,a.name=e.getFunctionName(),a}function xs(e){var t=e.callSite,n=e.name;n||(n="<anonymous@"+Ts(e)+">");var r=t.getThis(),a=r&&t.getTypeName();return"Object"===a&&(a=void 0),"Function"===a&&(a=r.name||a),a&&t.getMethodName()?a+"."+n:n}function zs(e,t,n){var r=(new Date).toUTCString()+" "+this._namespace+" deprecated "+e;if(this._traced){for(var a=0;a<n.length;a++)r+="\n    at "+n[a].toString();return r}return t&&(r+=" at "+Ts(t)),r}function Zs(e,t,n){var r="[36;1m"+this._namespace+"[22;39m [33;1mdeprecated[22;39m [0m"+e+"[39m";if(this._traced){for(var a=0;a<n.length;a++)r+="\n    [36mat "+n[a].toString()+"[39m";return r}return t&&(r+=" [36m"+Ts(t)+"[39m"),r}function Ts(e){return vs(_s,e[0])+":"+e[1]+":"+e[2]}function Es(){var e=Error.stackTraceLimit,t={},n=Error.prepareStackTrace;Error.prepareStackTrace=Os,Error.stackTraceLimit=Math.max(10,e),Error.captureStackTrace(t);var r=t.stack.slice(1);return Error.prepareStackTrace=n,Error.stackTraceLimit=e,r}function Os(e,t){return t}function js(e,t){if("function"!=typeof e)throw new TypeError("argument fn must be a function");var n=function(e){for(var t="",n=0;n<e;n++)t+=", arg"+n;return t.substr(2)}(e.length),r=ks(Es()[1]);return r.name=e.name,new Function("fn","log","deprecate","message","site",'"use strict"\nreturn function ('+n+") {log.call(deprecate, message, site)\nreturn fn.apply(this, arguments)\n}")(e,ws,this,t,r)}function Ns(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("argument obj must be object");var r=Object.getOwnPropertyDescriptor(e,t);if(!r)throw new TypeError("must call property on owner object");if(!r.configurable)throw new TypeError("property must be configurable");var a=this,i=ks(Es()[1]);i.name=t,"value"in r&&(r=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t),r=n.value;return n.get=function(){return r},n.writable&&(n.set=function(e){return r=e}),delete n.value,delete n.writable,Object.defineProperty(e,t,n),n}(e,t));var s=r.get,o=r.set;"function"==typeof s&&(r.get=function(){return ws.call(a,n,i),s.apply(this,arguments)}),"function"==typeof o&&(r.set=function(){return ws.call(a,n,i),o.apply(this,arguments)}),Object.defineProperty(e,t,r)}function $s(e,t,n){var r,a=new Error;return Object.defineProperty(a,"constructor",{value:$s}),Object.defineProperty(a,"message",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(a,"name",{enumerable:!1,configurable:!0,value:"DeprecationError",writable:!0}),Object.defineProperty(a,"namespace",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(a,"stack",{configurable:!0,enumerable:!1,get:function(){return void 0!==r?r:r=bs.call(this,n)},set:function(e){r=e}}),a}var As=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n]);return e});var Is={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},Ps=Cs;
/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */function Ss(e){if(!Object.prototype.hasOwnProperty.call(Cs.message,e))throw new Error("invalid status code: "+e);return Cs.message[e]}function Cs(e){if("number"==typeof e)return Ss(e);if("string"!=typeof e)throw new TypeError("code must be a number or string");var t=parseInt(e,10);return isNaN(t)?function(e){var t=e.toLowerCase();if(!Object.prototype.hasOwnProperty.call(Cs.code,t))throw new Error('invalid status message: "'+e+'"');return Cs.code[t]}(e):Ss(t)}Cs.message=Is,Cs.code=function(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n],a=Number(n);t[r.toLowerCase()]=a}),t}(Is),Cs.codes=function(e){return Object.keys(e).map(function(e){return Number(e)})}(Is),Cs.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},Cs.empty={204:!0,205:!0,304:!0},Cs.retry={502:!0,503:!0,504:!0};var Rs,Fs={exports:{}},Ms={exports:{}};try{var Ds=require("util");if("function"!=typeof Ds.inherits)throw"";Fs.exports=Ds.inherits}catch(e){Fs.exports=(Rs||(Rs=1,"function"==typeof Object.create?Ms.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ms.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Ms.exports)}var Ls=Fs.exports,Us=function(e){return e.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}
/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */;
/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */!function(e){var t,n=ys("http-errors"),r=As,a=Ps,i=Ls,s=Us;function o(e){return Number(String(e).charAt(0)+"00")}function c(e,t){var n=Object.getOwnPropertyDescriptor(e,"name");n&&n.configurable&&(n.value=t,Object.defineProperty(e,"name",n))}function u(e){return"Error"!==e.substr(-5)?e+"Error":e}e.exports=function e(){for(var t,r,i=500,s={},c=0;c<arguments.length;c++){var u=arguments[c],d=typeof u;if("object"===d&&u instanceof Error)i=(t=u).status||t.statusCode||i;else if("number"===d&&0===c)i=u;else if("string"===d)r=u;else{if("object"!==d)throw new TypeError("argument #"+(c+1)+" unsupported type "+d);s=u}}"number"==typeof i&&(i<400||i>=600)&&n("non-error status code; use only 4xx or 5xx status codes");("number"!=typeof i||!a.message[i]&&(i<400||i>=600))&&(i=500);var l=e[i]||e[o(i)];t||(t=l?new l(r):new Error(r||a.message[i]),Error.captureStackTrace(t,e));l&&t instanceof l&&t.status===i||(t.expose=i<500,t.status=t.statusCode=i);for(var p in s)"status"!==p&&"statusCode"!==p&&(t[p]=s[p]);return t},e.exports.HttpError=function(){function e(){throw new TypeError("cannot construct abstract class")}return i(e,Error),e}(),e.exports.isHttpError=(t=e.exports.HttpError,function(e){return!(!e||"object"!=typeof e)&&(e instanceof t||e instanceof Error&&"boolean"==typeof e.expose&&"number"==typeof e.statusCode&&e.status===e.statusCode)}),function(e,t,n){t.forEach(function(t){var d,l=s(a.message[t]);switch(o(t)){case 400:d=function(e,t,n){var s=u(t);function o(e){var t=null!=e?e:a.message[n],i=new Error(t);return Error.captureStackTrace(i,o),r(i,o.prototype),Object.defineProperty(i,"message",{enumerable:!0,configurable:!0,value:t,writable:!0}),Object.defineProperty(i,"name",{enumerable:!1,configurable:!0,value:s,writable:!0}),i}return i(o,e),c(o,s),o.prototype.status=n,o.prototype.statusCode=n,o.prototype.expose=!0,o}(n,l,t);break;case 500:d=function(e,t,n){var s=u(t);function o(e){var t=null!=e?e:a.message[n],i=new Error(t);return Error.captureStackTrace(i,o),r(i,o.prototype),Object.defineProperty(i,"message",{enumerable:!0,configurable:!0,value:t,writable:!0}),Object.defineProperty(i,"name",{enumerable:!1,configurable:!0,value:s,writable:!0}),i}return i(o,e),c(o,s),o.prototype.status=n,o.prototype.statusCode=n,o.prototype.expose=!1,o}(n,l,t)}d&&(e[t]=d,e[l]=d)})}(e.exports,a.codes,e.exports.HttpError)}(ms);var Vs=ms.exports,Bs=n(Vs);function Ws(e,t,n){const{accountability:r}=e;return null==(null==r?void 0:r.user)?n(Bs(401,"You must be logged in to access this.")):r.admin?void n():n(Bs(403,"You do not have permission to access this."))}function qs(e,t){try{return t.parse(e)}catch(e){const t=e instanceof ri?e.issues.map(e=>`[${e.path.join(",")}] ${e.message}`).join(". "):e;throw new Error(t)}}function Ks(e,t,n,r){if(n.headersSent)return r(e);Vs.isHttpError(e)?n.status(e.statusCode):n.status(500),n.json({message:e.message})}var Gs=Object.defineProperty,Js=Object.getOwnPropertySymbols,Ys=Object.prototype.hasOwnProperty,Hs=Object.prototype.propertyIsEnumerable,Xs=(e,t,n)=>t in e?Gs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qs=(e,t)=>{for(var n in t||(t={}))Ys.call(t,n)&&Xs(e,n,t[n]);if(Js)for(var n of Js(t))Hs.call(t,n)&&Xs(e,n,t[n]);return e},eo=async(e,{database:t,logger:n})=>{const r=new Vt(t);await r.init()&&n.info(`Created table ${r.getTableName()}`);const a=new Ut(t,n);e.use(Ws),e.get("/table/:table/sync_id/:sync_id",async(e,t,n)=>{try{const{table:a,sync_id:i}=qs(e.params,Hi({table:bi(),sync_id:bi()})),s=await r.getBySyncId(a,i);if(null===s)return void n(Bs(404,"No id map found"));t.status(200),t.json(s)}catch(e){n(e)}}),e.get("/table/:table/local_id/:local_id",async(e,t,n)=>{try{const{table:a,local_id:i}=qs(e.params,Hi({table:bi(),local_id:bi()})),s=await r.getByLocalId(a,i);if(null===s)return n(Bs(404,"No id map found"));t.status(200),t.json(s)}catch(e){n(e)}}),e.get("/table/:table",async(e,t,n)=>{try{const{table:n}=qs(e.params,Hi({table:bi()})),a=await r.getAll(n);t.status(200),t.json(a)}catch(e){n(e)}}),e.post("/table/:table",async(e,t,n)=>{try{const{table:a,local_id:i,sync_id:s}=qs(Qs(Qs({},e.params),e.body),Hi({table:bi(),local_id:bi().or(Ui()),sync_id:bi().optional()}));if(null!==await r.getByLocalId(a,i))return n(Bs(409,"Local id already exists"));const o=await r.add(a,i,s);t.json({sync_id:o}),t.status(201)}catch(e){n(e)}}),e.delete("/table/:table/sync_id/:sync_id",async(e,t,n)=>{try{const{table:n,sync_id:a}=qs(e.params,Hi({table:bi(),sync_id:bi()}));await r.removeBySyncId(n,a),t.status(204).send()}catch(e){n(e)}}),e.delete("/table/:table/local_id/:local_id",async(e,t,n)=>{try{const{table:n,local_id:a}=qs(e.params,Hi({table:bi(),local_id:bi()}));await r.removeByLocalId(n,a),t.status(204).send()}catch(e){n(e)}}),e.delete("/helpers/permissions/duplicates",async(e,t,n)=>{try{const{keep:n}=qs(e.body,Hi({keep:ts(["first","last"]).default("last")})),r=await a.removeDuplicates(n);t.status(200).send({deletedPermissions:r})}catch(e){n(e)}}),e.use(function(e){return function(t,n,r,a){if(Vs.isHttpError(t)){if(t.statusCode<500)return a(t);const{message:n,statusCode:r}=t;e.error(`${r}: ${n}`)}else e.error(t.message||t);a(t)}}(n)),e.use(Ks)};export{eo as default};
